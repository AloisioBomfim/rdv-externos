<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Controle de Horas - Relat√≥rio Mensal</title>
    <link rel="stylesheet" href="style.css">
</head>
<body class="horas">
    <div class="container">
        <div class="header">
            <h1>‚è±Ô∏è Relat√≥rio de Horas - Faturamento e Reembolso ‚è±Ô∏è</h1>
            <p>Registro detalhado de horas executadas pelo analista</p>
        </div>

        <form id="horasForm">
            <!-- SE√á√ÉO 1: DADOS DA VISITA -->
            <div class="section">
                <div class="section-title">1. Dados da Visita</div>
                <div class="month-selector">
                    <div class="form-group">
                        <label for="dataVisita" class="required">Data da Visita</label>
                        <input type="date" id="dataVisita" name="dataVisita" required onkeydown="navegarComEnterFormulario(event)">
                    </div>
                    <div class="form-group">
                        <label for="mesPeriodo" class="required">Per√≠odo (M√™s/Ano)</label>
                        <input type="month" id="mesPeriodo" name="mesPeriodo" required onkeydown="navegarComEnterFormulario(event)">
                    </div>
                    <div class="form-group">
                    </div>
                    <div class="form-group">
                        <label for="licencaCliente" class="required">Licen√ßa/Cliente</label>
                        <input type="text" id="licencaCliente" name="licencaCliente" placeholder="Informe o c√≥digo da licen√ßa e a Raz√£o Sozial do cliente" required onkeydown="navegarComEnterFormulario(event)">
                    </div>
                    <div class="form-group">
                        <label for="cidadeEstado" class="required">Cidade/UF</label>
                        <input type="text" id="cidadeEstado" name="cidadeEstado" placeholder="Informe a Cidade e Estado do Cliente" required onkeydown="navegarComEnterFormulario(event)">
                    </div>                   
                    <div class="form-group">
                        <label for="numeroAtendimento" class="required">N√∫mero de Atendimento</label>
                        <input type="text" id="numeroAtendimento" name="numeroAtendimento" placeholder="Informe o n√∫mero do Atendimento do PB" required onkeydown="navegarComEnterFormulario(event)">
                    </div>                   
                </div>
            </div>

            <!-- SE√á√ÉO 2: DADOS T√âCNICOS -->
            <div class="section">
                <div class="section-title">2. Dados T√©cnicos</div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="nomeAnalista" class="required">Nome do Analista</label>
                        <input type="text" id="nomeAnalista" name="nomeAnalista" placeholder="Informe o nome completo do analista" required onkeydown="navegarComEnterFormulario(event)">
                    </div>
                    <div class="form-group">
                        <label for="projeto">Projeto/Descri√ß√£o</label>
                        <input type="text" id="projeto" name="projeto" placeholder="Projeto ou descri√ß√£o t√©cnica (opcional)" onkeydown="navegarComEnterFormulario(event)">
                    </div>
                    <div class="form-group">
                        <label for="valorHoraTecnica" class="required">Valor Hora T√©cnica</label>
                        <input type="text" id="valorHoraTecnica" name="valorHoraTecnica" placeholder="Valor da hora t√©cnica (R$)" required onkeydown="navegarComEnterFormulario(event); if(event.key === 'Enter') validarMoeda(event.target);" onblur="validarMoeda(this)">
                    </div>
                </div>
            </div>

           <!-- SE√á√ÉO 3: REGISTRO DE HORAS -->
            <div class="section">
                <div class="section-title">3. Registro Detalhado de Horas</div>
                <div class="info-box">
                    ‚ÑπÔ∏è Preencha o registro de horas di√°rias. Os totais ser√£o calculados automaticamente.
                </div>
                
                <div class="table-container">
                    <table id="horasTable">
                        <thead>
                            <tr>
                                <th>Data</th>
                                <th>Entrada</th>
                                <th>Sa√≠da</th>
                                <th>Intervalo</th>
                                <th>Total Horas</th>
                                <th>Valor (R$)</th>
                                <th>H. Deslocamento</th>
                                <th>Hora Bonifica√ß√£o</th>
                                <th>Valor Bonifica√ß√£o</th>
                                <th>Excluir Linhas</th>
                            </tr>
                        </thead>
                        <tbody id="tableBody">
                            <!-- Linhas ser√£o adicionadas dinamicamente -->
                        </tbody>
                        <tfoot>
                            <tr class="total-row">
                                <td colspan="4" style="text-align: right;">TOTAIS:</td>
                                <td><span id="totalHoras">0.00</span></td>
                                <td>R$ <span id="totalValor">0.00</span></td>
                                <td><span id="totalDeslocam">0.00</span></td>
                                <td><span id="totalBonif">0.00</span></td>
                                <td>R$ <span id="totalValorBonif">0.00</span></td>
                                <td></td>
                            </tr>
                        </tfoot>
                    </table>
                </div>

                <div class="btn-group">
                    <button type="button" class="btn btn-secondary" data-action="adicionarLinha">+ Adicionar Dia</button>
                    <button type="button" class="btn btn-secondary" data-action="preencherDiasUteis">üìÖ Preencher Dias √öteis</button>
                </div>
            </div>

            <!-- SE√á√ÉO 4: RESUMO MENSAL -->
            <div class="section">
                <div class="section-title">4. Resumo Mensal</div>
                <div class="summary-box">
                    <div class="summary-item">
                        <span class="summary-label">Total de Horas</span>
                        <span class="summary-value"><span id="sumTotalHoras">0.00</span> h</span>
                    </div>
                    <div class="summary-item">
                        <span class="summary-label">Total de Deslocamento</span>
                        <span class="summary-value"><span id="sumTotalDeslocam">0.00</span> h</span>
                    </div>
                    <div class="summary-item">
                        <span class="summary-label">Total de Horas Bonificadas</span>
                        <span class="summary-value"><span id="sumTotalBonif">0.00</span> h</span>
                    </div>
                    <div class="summary-item">
                        <span class="summary-label">Valor Total</span>
                        <span class="summary-value">R$ <span id="sumTotalValor">0.00</span></span>
                    </div>
                    <div class="summary-item">
                        <span class="summary-label">Valor Bonifica√ß√£o</span>
                        <span class="summary-value">R$ <span id="sumTotalValorBonif">0.00</span></span>
                    </div>
                    <div class="summary-item">
                        <span class="summary-label">Valor Total + Bonif.</span>
                        <span class="summary-value">R$ <span id="sumTotalGeral">0.00</span></span>
                    </div>
                </div>
            </div>

            <!-- SE√á√ÉO 5: OBSERVA√á√ïES -->
            <div class="section">
                <div class="section-title">5. Observa√ß√µes</div>
                <div class="form-row">
                    <div class="form-group form-row-full">
                        <label for="observacoes">Observa√ß√µes e Anota√ß√µes</label>
                        <textarea id="observacoes" name="observacoes" placeholder="Descreva qualquer informa√ß√£o relevante sobre as atividades executadas..." onkeydown="if(event.key === 'Enter' && event.ctrlKey) { event.preventDefault(); navegarComEnterFormulario(event); }"></textarea>
                    </div>
                </div>
            </div>

            <!-- SE√á√ÉO 6: A√á√ïES -->
            <div class="section">
                <div class="btn-group">
                    <button type="button" class="btn btn-primary" data-action="salvarDados">üíæ Salvar Localmente</button>
                    <button type="button" class="btn btn-secondary" data-action="exportarJSON">üì• Exportar JSON</button>
                    <button type="button" class="btn btn-secondary" data-action="exportarCSV">üìä Exportar CSV</button>
                    <button type="button" class="btn btn-secondary" data-action="imprimirRelatorio">üñ®Ô∏è Imprimir</button>
                    <button type="reset" class="btn btn-secondary" data-action="limparFormulario">üîÑ Limpar</button>
                </div>
            </div>
        </form>
    </div>

    <script src="script.js"></script>
</body>
</html>
